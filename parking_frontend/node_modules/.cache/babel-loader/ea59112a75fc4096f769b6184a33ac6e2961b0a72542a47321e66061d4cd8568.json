{"ast":null,"code":"var _jsxFileName = \"/Users/adisalic/Desktop/weblearning/parking/src/user/components/CarSelection.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { useHttpClient } from \"../../hooks/http-hook\";\nimport { AuthContext } from \"../../context/auth-context\";\nimport classes from \"./CarSelection.module.css\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CarSelection = _ref => {\n  _s();\n  let {\n    selectedPay,\n    onClose\n  } = _ref;\n  const auth = useContext(AuthContext);\n  const {\n    sendRequest\n  } = useHttpClient();\n  const [loadedCars, setLoadedCars] = useState([]);\n  const [num, isNum] = useState(12);\n  const [toPay, setToPay] = use;\n  useEffect(() => {\n    if (selectedPay.zone === 0) {\n      if (selectedPay.price > 3) {\n        isNum(13);\n      } else isNum(10);\n    }\n    if (selectedPay.zone === 1) {\n      if (selectedPay.price > 3) {\n        isNum(14);\n      } else isNum(11);\n    }\n    if (selectedPay.zone === 2) {\n      if (selectedPay.price > 3) {\n        isNum(15);\n      } else isNum(12);\n    }\n  }, [selectedPay.zone, selectedPay.plate, selectedPay.price]);\n  useEffect(() => {\n    const fetchCars = async () => {\n      try {\n        const responseData = await sendRequest(`http://localhost:5500/api/cars/user/${auth.userId}`, \"GET\", null, {\n          Authorization: \"Bearer \" + auth.token\n        });\n        setLoadedCars(responseData.cars);\n      } catch (err) {}\n    };\n    fetchCars();\n    // eslint-disable-next-line\n  }, [auth.userId, onClose]);\n  const carPayment = async plate => {\n    try {\n      await sendRequest(`http://localhost:5500/api/payments/${auth.userId}`, \"POST\", JSON.stringify({\n        id: selectedPay.id,\n        name: selectedPay.name,\n        zone: selectedPay.zone,\n        plate: plate,\n        price: selectedPay.price\n      }), {\n        Authorization: \"Bearer \" + auth.token,\n        \"Content-Type\": \"application/json\"\n      });\n      onClose();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const carPay = plate => {\n    carPayment(plate);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.car,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: classes.title,\n          children: \"Lokacija\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: selectedPay.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [selectedPay.price, \" KM /1h\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), selectedPay.daily && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [selectedPay.daily, \" KM /dan\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: classes.title,\n          children: \"Izaberite vozilo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), loadedCars.length === 0 ? /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/carslist\",\n          className: classes.link,\n          children: \"Dodajte vozilo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this) : \"\", loadedCars.map(cars => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: classes.plates,\n          onClick: () => carPay(cars.plate),\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: classes.link,\n            to: \"sms:+3878335\" + num + \";?&body=\" + cars.plate,\n            children: [cars.name, \" - (\", cars.plate, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)\n        }, cars._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: onClose,\n          children: \"Odustani\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(CarSelection, \"FoD0/kZYleADoUU2TioBUgJgZus=\", false, function () {\n  return [useHttpClient];\n});\n_c = CarSelection;\nexport default CarSelection;\nvar _c;\n$RefreshReg$(_c, \"CarSelection\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useHttpClient","AuthContext","classes","Link","jsxDEV","_jsxDEV","CarSelection","_ref","_s","selectedPay","onClose","auth","sendRequest","loadedCars","setLoadedCars","num","isNum","toPay","setToPay","use","zone","price","plate","fetchCars","responseData","userId","Authorization","token","cars","err","carPayment","JSON","stringify","id","name","console","log","carPay","children","className","car","wrapper","title","fileName","_jsxFileName","lineNumber","columnNumber","daily","length","to","link","map","plates","onClick","_id","_c","$RefreshReg$"],"sources":["/Users/adisalic/Desktop/weblearning/parking/src/user/components/CarSelection.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { useHttpClient } from \"../../hooks/http-hook\";\nimport { AuthContext } from \"../../context/auth-context\";\nimport classes from \"./CarSelection.module.css\";\nimport { Link } from \"react-router-dom\";\n\nconst CarSelection = ({ selectedPay, onClose }) => {\n  const auth = useContext(AuthContext);\n  const { sendRequest } = useHttpClient();\n  const [loadedCars, setLoadedCars] = useState([]);\n  const [num, isNum] = useState(12);\n  const [toPay, setToPay] = use\n\n  useEffect(() => {\n    if (selectedPay.zone === 0) {\n      if (selectedPay.price > 3) {\n        isNum(13);\n      } else isNum(10);\n    }\n    if (selectedPay.zone === 1) {\n      if (selectedPay.price > 3) {\n        isNum(14);\n      } else isNum(11);\n    }\n    if (selectedPay.zone === 2) {\n      if (selectedPay.price > 3) {\n        isNum(15);\n      } else isNum(12);\n    }\n  }, [selectedPay.zone, selectedPay.plate, selectedPay.price]);\n\n  useEffect(() => {\n    const fetchCars = async () => {\n      try {\n        const responseData = await sendRequest(\n          `http://localhost:5500/api/cars/user/${auth.userId}`,\n          \"GET\",\n          null,\n          {\n            Authorization: \"Bearer \" + auth.token,\n          }\n        );\n        setLoadedCars(responseData.cars);\n      } catch (err) {}\n    };\n    fetchCars();\n    // eslint-disable-next-line\n  }, [auth.userId, onClose]);\n\n  const carPayment = async (plate) => {\n    try {\n      await sendRequest(\n        `http://localhost:5500/api/payments/${auth.userId}`,\n        \"POST\",\n        JSON.stringify({\n          id: selectedPay.id,\n          name: selectedPay.name,\n          zone: selectedPay.zone,\n          plate: plate,\n          price: selectedPay.price,\n        }),\n        {\n          Authorization: \"Bearer \" + auth.token,\n          \"Content-Type\": \"application/json\",\n        }\n      );\n      onClose();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const carPay = (plate) => {\n    carPayment(plate);\n  };\n  return (\n    <div>\n      <div className={classes.car}>\n        <div className={classes.wrapper}>\n          <h4 className={classes.title}>Lokacija</h4>\n          <p>{selectedPay.name}</p>\n          <p>{selectedPay.price} KM /1h</p>\n          {selectedPay.daily && <p>{selectedPay.daily} KM /dan</p>}\n          <h4 className={classes.title}>Izaberite vozilo:</h4>\n          {loadedCars.length === 0 ? (\n            <Link to=\"/carslist\" className={classes.link}>\n              Dodajte vozilo\n            </Link>\n          ) : (\n            \"\"\n          )}\n          {loadedCars.map((cars) => (\n            <button\n              key={cars._id}\n              className={classes.plates}\n              onClick={() => carPay(cars.plate)}\n            >\n              <Link\n                className={classes.link}\n                to={\"sms:+3878335\" + num + \";?&body=\" + cars.plate}\n              >\n                {cars.name} - ({cars.plate})\n              </Link>\n            </button>\n          ))}\n          <div onClick={onClose}>Odustani</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CarSelection;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}